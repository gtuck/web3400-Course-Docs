{# templates/base.html.twig #}
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>{% block title %}{{ pageTitle|default('Page') }} - {{ siteName|default('Site') }}{% endblock %}</title>

  {% block meta %}
    <meta name="description" content="{{ metaDescription|default('')|e }}">
    {# <link rel="canonical" href="{{ canonicalUrl|default(app.request.uri|default(''))|e }}"> #}
  {% endblock %}

  {# Bulma & Icons #}
  <link rel="preconnect" href="https://cdn.jsdelivr.net">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@1.0.4/css/bulma.min.css">
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.4/css/all.css">

  {# BulmaJS #}
  <script src="https://cdn.jsdelivr.net/npm/@vizuaalog/bulmajs@0.12/dist/bulma.min.js" defer></script>

  {% block styles %}{% endblock %}
</head>

<body class="has-navbar-fixed-top">
  <a class="is-sr-only" href="#main">Skip to content</a>

  {# ====== HEADER / NAV ====== #}
  <header class="container">
    <nav class="navbar is-fixed-top is-spaced has-shadow" role="navigation" aria-label="main navigation">
      <div class="navbar-brand">
        <a class="navbar-item" href="{{ path('home')|default('/') }}">
          <span class="icon-text">
            <span class="icon"><i class="fas fa-code" aria-hidden="true"></i></span>
            <span>{{ siteName|default('Site') }}</span>
          </span>
        </a>

        <a role="button" class="navbar-burger" aria-label="menu" aria-expanded="false" data-target="navbarMenu">
          <span aria-hidden="true"></span>
          <span aria-hidden="true"></span>
          <span aria-hidden="true"></span>
        </a>
      </div>

      <div id="navbarMenu" class="navbar-menu">
        <div class="navbar-start">
          {% block nav_start %}{% endblock %}
        </div>
        <div class="navbar-end">
          {% block nav_end %}
            <a class="navbar-item" href="{{ path('contact')|default('/contact') }}">Contact</a>
          {% endblock %}
        </div>
      </div>
    </nav>

    {# Spacer #}
    <div class="section is-paddingless" style="margin-top:3.5rem;"></div>
  </header>

  {# ====== MAIN ====== #}
  <main id="main" class="container">
    {% block flash %}
      {% if messages is defined and messages is not empty %}
        <section class="section pt-5">
          {% for message in messages %}
            {# Expect: message = { type: 'success'|'info'|'warning'|'danger', text: '...' } #}
            <div class="notification is-{{ message.type|default('info')|e }}">
              {# BulmaJS close: keep the delete button; BulmaJS will handle via data-attributes #}
              <button class="delete" data-bulma="notification" aria-label="Dismiss"></button>
              {{ message.text|e }}
            </div>
          {% endfor %}
        </section>
      {% endif %}
    {% endblock %}

    <section class="section">
      {% block page_header %}
        <h1 class="title">{{ pageTitle|default('Page')|e }}</h1>
      {% endblock %}

      {% block content %}
        <p>{{ pageContent|default('')|e }}</p>
      {% endblock %}
    </section>
  </main>

  {# ====== FOOTER ====== #}
  <footer class="footer">
    <div class="content has-text-centered">
      <p>&copy; {{ "now"|date("Y") }} â€” {{ siteName|default('Site')|e }}.</p>
    </div>
  </footer>

  {# Page-specific scripts, if any #}
  {% block scripts %}{% endblock %}
</body>
</html>
